<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üçØ Pot of Gold - Catch the Falling Treasures!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameContainer {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 100vh;
            max-height: 800px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 50%, #B0E0E6 100%);
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.3);
        }
        
        #gameArea {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        /* UI Elements */
        #scoreBoard {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            z-index: 100;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 10px;
            color: white;
        }
        
        .score-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .score-value {
            font-size: 20px;
            font-weight: bold;
            color: #FFD700;
        }
        
        /* Cart/Pot */
        #cart {
            position: absolute;
            bottom: 20px;
            width: 80px;
            height: 60px;
            background: #8B4513;
            border-radius: 10px 10px 20px 20px;
            border: 3px solid #654321;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 35px;
            transition: left 0.1s ease-out;
            z-index: 50;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        #cart.collecting {
            animation: collectPulse 0.3s ease;
        }
        
        @keyframes collectPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* Falling Items */
        .falling-item {
            position: absolute;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 25px;
            animation: fall linear;
            z-index: 10;
        }
        
        @keyframes fall {
            from {
                transform: translateY(0) rotate(0deg);
            }
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        .item-coin {
            background: #FFD700;
            border-radius: 50%;
            border: 2px solid #FFA500;
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
        }
        
        .item-gem {
            background: linear-gradient(45deg, #4169E1, #87CEEB);
            clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
            animation: sparkle 1s infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .item-bomb {
            background: #DC143C;
            border-radius: 50%;
            border: 2px solid #8B0000;
        }
        
        .item-star {
            background: #FFD700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }
        
        .item-money-bag {
            background: #8B4513;
            border-radius: 10px;
            border: 2px solid #654321;
        }
        
        /* Effects */
        .collection-effect {
            position: absolute;
            color: #FFD700;
            font-size: 24px;
            font-weight: bold;
            animation: floatUp 1s ease-out;
            pointer-events: none;
            z-index: 200;
        }
        
        @keyframes floatUp {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(-50px);
                opacity: 0;
            }
        }
        
        /* Controls */
        #controls {
            position: absolute;
            bottom: 100px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            z-index: 100;
        }
        
        .control-btn {
            background: rgba(255,255,255,0.3);
            border: 2px solid white;
            padding: 15px 30px;
            border-radius: 10px;
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            touch-action: none;
        }
        
        .control-btn:active {
            background: rgba(255,255,255,0.5);
        }
        
        /* Game Over */
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 300;
        }
        
        #gameOver h2 {
            color: #FFD700;
            margin-bottom: 20px;
        }
        
        #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 400;
            color: white;
        }
        
        #startScreen h1 {
            color: #FFD700;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .start-btn {
            background: #FFD700;
            color: #1a1a2e;
            border: none;
            padding: 20px 50px;
            font-size: 24px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(255,215,0,0.3);
            transition: transform 0.2s;
        }
        
        .start-btn:hover {
            transform: scale(1.05);
        }
        
        /* Mobile responsiveness */
        @media (max-width: 600px) {
            #cart {
                width: 60px;
                height: 45px;
                font-size: 25px;
            }
            
            .falling-item {
                width: 30px;
                height: 30px;
                font-size: 20px;
            }
            
            .control-btn {
                padding: 10px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="gameArea">
            <!-- Score Board -->
            <div id="scoreBoard">
                <div class="score-item">
                    <span>Score:</span>
                    <span class="score-value" id="score">0</span>
                </div>
                <div class="score-item">
                    <span>üí∞</span>
                    <span class="score-value" id="coins">0</span>
                </div>
                <div class="score-item">
                    <span>Level:</span>
                    <span class="score-value" id="level">1</span>
                </div>
                <div class="score-item">
                    <span>‚ù§Ô∏è</span>
                    <span class="score-value" id="lives">3</span>
                </div>
            </div>
            
            <!-- Cart/Pot -->
            <div id="cart">üçØ</div>
            
            <!-- Controls for mobile -->
            <div id="controls">
                <button class="control-btn" id="leftBtn">‚Üê LEFT</button>
                <button class="control-btn" id="rightBtn">RIGHT ‚Üí</button>
            </div>
            
            <!-- Game Over Screen -->
            <div id="gameOver">
                <h2>Game Over!</h2>
                <p>Final Score: <span id="finalScore">0</span></p>
                <p>Coins Collected: <span id="finalCoins">0</span></p>
                <p>Level Reached: <span id="finalLevel">1</span></p>
                <button class="start-btn" onclick="resetGame()">Play Again</button>
            </div>
            
            <!-- Start Screen -->
            <div id="startScreen">
                <h1>üçØ Pot of Gold</h1>
                <p style="font-size: 20px; margin-bottom: 30px;">Catch the falling treasures!</p>
                <button class="start-btn" onclick="startGame()">Start Game</button>
                <div style="margin-top: 20px; text-align: center;">
                    <p>Use arrow keys or buttons to move</p>
                    <p>üí∞ = 10 points | üíé = 50 points | ‚≠ê = 100 points</p>
                    <p>Avoid üí£ bombs!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let gameState = {
            score: 0,
            coins: 0,
            level: 1,
            lives: 3,
            isPlaying: false,
            cartPosition: 50, // percentage
            fallSpeed: 2,
            spawnRate: 1500,
            items: []
        };
        
        let gameLoop = null;
        let spawnInterval = null;
        
        // DOM Elements
        const cart = document.getElementById('cart');
        const gameArea = document.getElementById('gameArea');
        const scoreEl = document.getElementById('score');
        const coinsEl = document.getElementById('coins');
        const levelEl = document.getElementById('level');
        const livesEl = document.getElementById('lives');
        
        // Item Types
        const itemTypes = [
            { type: 'coin', emoji: 'üí∞', value: 10, weight: 50, class: 'item-coin' },
            { type: 'gem', emoji: 'üíé', value: 50, weight: 20, class: 'item-gem' },
            { type: 'star', emoji: '‚≠ê', value: 100, weight: 5, class: 'item-star' },
            { type: 'money-bag', emoji: 'üíµ', value: 25, weight: 15, class: 'item-money-bag' },
            { type: 'bomb', emoji: 'üí£', value: -1, weight: 10, class: 'item-bomb' }
        ];
        
        // Initialize cart position
        function updateCartPosition() {
            const gameWidth = gameArea.offsetWidth;
            const cartWidth = cart.offsetWidth;
            const maxPosition = gameWidth - cartWidth;
            const position = (gameState.cartPosition / 100) * maxPosition;
            cart.style.left = position + 'px';
        }
        
        // Controls
        let moveInterval = null;
        
        function moveCart(direction) {
            if (!gameState.isPlaying) return;
            
            const speed = 3;
            if (direction === 'left') {
                gameState.cartPosition = Math.max(0, gameState.cartPosition - speed);
            } else {
                gameState.cartPosition = Math.min(100, gameState.cartPosition + speed);
            }
            updateCartPosition();
        }
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                moveCart('left');
            } else if (e.key === 'ArrowRight') {
                moveCart('right');
            }
        });
        
        // Touch/Mouse controls
        document.getElementById('leftBtn').addEventListener('mousedown', () => {
            moveInterval = setInterval(() => moveCart('left'), 50);
        });
        
        document.getElementById('rightBtn').addEventListener('mousedown', () => {
            moveInterval = setInterval(() => moveCart('right'), 50);
        });
        
        document.addEventListener('mouseup', () => {
            if (moveInterval) {
                clearInterval(moveInterval);
                moveInterval = null;
            }
        });
        
        // Touch support
        document.getElementById('leftBtn').addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveInterval = setInterval(() => moveCart('left'), 50);
        });
        
        document.getElementById('rightBtn').addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveInterval = setInterval(() => moveCart('right'), 50);
        });
        
        document.addEventListener('touchend', () => {
            if (moveInterval) {
                clearInterval(moveInterval);
                moveInterval = null;
            }
        });
        
        // Spawn falling items
        function spawnItem() {
            if (!gameState.isPlaying) return;
            
            // Select random item based on weights
            const totalWeight = itemTypes.reduce((sum, item) => sum + item.weight, 0);
            let random = Math.random() * totalWeight;
            let selectedItem = itemTypes[0];
            
            for (const item of itemTypes) {
                random -= item.weight;
                if (random <= 0) {
                    selectedItem = item;
                    break;
                }
            }
            
            // Create item element
            const itemEl = document.createElement('div');
            itemEl.className = 'falling-item ' + selectedItem.class;
            itemEl.innerHTML = selectedItem.emoji;
            itemEl.style.left = Math.random() * (gameArea.offsetWidth - 40) + 'px';
            itemEl.style.top = '-50px';
            itemEl.style.animationDuration = (5 - gameState.fallSpeed) + 's';
            
            // Store item data
            itemEl.dataset.type = selectedItem.type;
            itemEl.dataset.value = selectedItem.value;
            
            gameArea.appendChild(itemEl);
            gameState.items.push(itemEl);
            
            // Remove item after animation
            setTimeout(() => {
                if (itemEl.parentNode) {
                    itemEl.remove();
                    gameState.items = gameState.items.filter(item => item !== itemEl);
                }
            }, (5 - gameState.fallSpeed) * 1000);
        }
        
        // Collision detection
        function checkCollisions() {
            const cartRect = cart.getBoundingClientRect();
            const gameRect = gameArea.getBoundingClientRect();
            
            gameState.items.forEach(item => {
                if (!item.parentNode) return;
                
                const itemRect = item.getBoundingClientRect();
                
                // Check if item reached cart level
                if (itemRect.bottom >= cartRect.top && itemRect.bottom <= cartRect.bottom) {
                    // Check horizontal collision
                    if (itemRect.left < cartRect.right && itemRect.right > cartRect.left) {
                        collectItem(item);
                    }
                }
            });
        }
        
        // Collect item
        function collectItem(itemEl) {
            const type = itemEl.dataset.type;
            const value = parseInt(itemEl.dataset.value);
            
            // Show collection effect
            const effect = document.createElement('div');
            effect.className = 'collection-effect';
            effect.style.left = itemEl.style.left;
            effect.style.bottom = '100px';
            
            if (type === 'bomb') {
                // Hit bomb
                gameState.lives--;
                effect.innerHTML = 'üí• -1 ‚ù§Ô∏è';
                effect.style.color = 'red';
                updateLives();
                
                if (gameState.lives <= 0) {
                    endGame();
                }
            } else {
                // Collect treasure
                gameState.score += value;
                gameState.coins += Math.floor(value / 10);
                effect.innerHTML = '+' + value;
                cart.classList.add('collecting');
                setTimeout(() => cart.classList.remove('collecting'), 300);
                
                updateScore();
                checkLevelUp();
            }
            
            gameArea.appendChild(effect);
            setTimeout(() => effect.remove(), 1000);
            
            // Remove item
            itemEl.remove();
            gameState.items = gameState.items.filter(item => item !== itemEl);
        }
        
        // Update displays
        function updateScore() {
            scoreEl.textContent = gameState.score;
            coinsEl.textContent = gameState.coins;
        }
        
        function updateLives() {
            livesEl.innerHTML = '‚ù§Ô∏è'.repeat(Math.max(0, gameState.lives));
        }
        
        function checkLevelUp() {
            const newLevel = Math.floor(gameState.score / 500) + 1;
            if (newLevel > gameState.level) {
                gameState.level = newLevel;
                levelEl.textContent = gameState.level;
                
                // Increase difficulty
                gameState.fallSpeed = Math.min(4, 2 + (gameState.level - 1) * 0.2);
                gameState.spawnRate = Math.max(800, 1500 - (gameState.level - 1) * 100);
                
                // Restart spawn interval with new rate
                clearInterval(spawnInterval);
                spawnInterval = setInterval(spawnItem, gameState.spawnRate);
                
                // Show level up effect
                const levelUpMsg = document.createElement('div');
                levelUpMsg.className = 'collection-effect';
                levelUpMsg.innerHTML = 'LEVEL UP!';
                levelUpMsg.style.left = '50%';
                levelUpMsg.style.transform = 'translateX(-50%)';
                levelUpMsg.style.bottom = '200px';
                levelUpMsg.style.fontSize = '36px';
                gameArea.appendChild(levelUpMsg);
                setTimeout(() => levelUpMsg.remove(), 2000);
            }
        }
        
        // Game loop
        function gameUpdate() {
            if (!gameState.isPlaying) return;
            checkCollisions();
        }
        
        // Start game
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            gameState = {
                score: 0,
                coins: 0,
                level: 1,
                lives: 3,
                isPlaying: true,
                cartPosition: 50,
                fallSpeed: 2,
                spawnRate: 1500,
                items: []
            };
            
            updateScore();
            updateLives();
            levelEl.textContent = gameState.level;
            updateCartPosition();
            
            // Start spawning items
            spawnInterval = setInterval(spawnItem, gameState.spawnRate);
            
            // Start game loop
            gameLoop = setInterval(gameUpdate, 50);
        }
        
        // End game
        function endGame() {
            gameState.isPlaying = false;
            clearInterval(spawnInterval);
            clearInterval(gameLoop);
            
            // Clear remaining items
            gameState.items.forEach(item => {
                if (item.parentNode) item.remove();
            });
            gameState.items = [];
            
            // Show game over
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalCoins').textContent = gameState.coins;
            document.getElementById('finalLevel').textContent = gameState.level;
            document.getElementById('gameOver').style.display = 'block';
        }
        
        // Reset game
        function resetGame() {
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
        }
        
        // Initialize
        window.addEventListener('resize', updateCartPosition);
        updateCartPosition();
    </script>
</body>
</html>